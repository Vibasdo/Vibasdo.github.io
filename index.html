<!DOCTYPE html>
<html lang="en">
<head>
    <title>İçerisinde Ne Var?</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta charset="utf-8" />

    <style data-tag="reset-style-sheet">
      html {  line-height: 1.15;}body {  margin: 0;}* {  box-sizing: border-box;  border-width: 0;  border-style: solid;}p,li,ul,pre,div,h1,h2,h3,h4,h5,h6,figure,blockquote,figcaption {  margin: 0;  padding: 0;}button {  background-color: transparent;}button,input,optgroup,select,textarea {  font-family: inherit;  font-size: 100%;  line-height: 1.15;  margin: 0;}button,select {  text-transform: none;}button,[type="button"],[type="reset"],[type="submit"] {  -webkit-appearance: button;}button::-moz-focus-inner,[type="button"]::-moz-focus-inner,[type="reset"]::-moz-focus-inner,[type="submit"]::-moz-focus-inner {  border-style: none;  padding: 0;}button:-moz-focus,[type="button"]:-moz-focus,[type="reset"]:-moz-focus,[type="submit"]:-moz-focus {  outline: 1px dotted ButtonText;}a {  color: inherit;  text-decoration: inherit;}input {  padding: 2px 4px;}img {  display: block;}html { scroll-behavior: smooth  }
    </style>
    <style data-tag="default-style-sheet">
      html {
        font-family: Inter;
        font-size: 16px;
      }

      body {
        font-weight: 400;
        font-style:normal;
        text-decoration: none;
        text-transform: none;
        letter-spacing: normal;
        line-height: 1.15;
        color: var(--dl-color-gray-black);
        background-color: var(--dl-color-gray-white);
      }
    </style>
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,100;0,300;0,400;0,700;0,900;1,100;1,300;1,400;1,700;1,900&amp;display=swap"
      data-tag="font"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Raleway:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&amp;display=swap"
      data-tag="font"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&amp;display=swap"
      data-tag="font"
    />
    <link
      rel="stylesheet"
      href="https://unpkg.com/@teleporthq/teleport-custom-scripts/dist/style.css"
    />
    <style>
      @keyframes fade-in-left {
        0% {
          opacity: 0;
          transform: translateX(-20px);
        }
        100% {
          opacity: 1;
          transform: translateX(0);
        }
      }
    </style>
  </head>
  <body>
    <link rel="stylesheet" href="./style.css" />
    <div>
      <link href="./index.css" rel="stylesheet" />
      <div class="home-container">
        <div class="home-header">
          <div class="home-container01">
            <div class="home-container02">
              <a href="index.html" class="home-ana-men button">
                <span>
                  <span>Ana Menü</span>
                  <br />
                </span>
              </a>
            </div>
            <div class="home-container03">
              <a href="kullanicigirisi.html" class="home-kullanc-girii button">
                <span>
                  <span>Kullanıcı Girişi</span>
                  <br />
                </span>
              </a>
            </div>
          </div>
        </div>
        <div class="home-features">
          <div class="home-container04">
            <h1 class="home-text06">
              <br />
              <span>İçerisinde Ne Var?</span>
            </h1>
            <div class="home-container05">
              <div>
                <button onclick="startBarcodeScanner()">Kamera ile tarama yapmak için tıklayın</button>
                <div id="dbrScanner" style="display: none;"></div>
                <script src="https://cdn.jsdelivr.net/npm/dynamsoft-javascript-barcode@9.6.32/dist/dbr.js"></script>
                <br />
                <br />
                <br />
                <br />
              </div>
              <span>
                <span>Aramak İstediğiniz Ürünü Giriniz.</span>
                <br />
                <br />
              </span>
              <div class="home-container06">
                <div class="home-container07">
                  <div class="home-container08">
                    <input
                      type="text"
                      id="searchInput"
                      placeholder="Barkod veya Ürün Adı"
                      class="input"
                    />
                  </div>
                </div>
                <button type="button" onclick="searchPage()" class="button">
                  <span>
                    <span>Ara</span>
                    <br />
                  </span>
                </button>
              </div>
              <br />
              <ul id="autocompleteList"></ul>
            </div>
          </div>
        </div>
        <div class="home-banner">
          <div class="home-banner1">
            <h1 class="home-banner-heading heading2">İçerisinde Ne Var?</h1>
            <span class="home-banner-sub-heading">
              Günümüzde bir çok paketlenmiş gıda ürününün içeriğini okumak bazı durumlarda oldukça zor olabiliyor. Gerek küçük boyutta yazılmış metinler, gerek eksik yazılmış bilgiler sebebiyle bir çok tüketici aldığı ürünün içerisindeki maddelerin, oranlarının, değerlerinin ve benzeri ne olduğunu merak etse de okumakta zorlanabiliyor. Veya istediği bilgiye ya eksik erişiyor ya da hiç erişemiyor. Paketlenmiş ürünlerde, paketin üzerinde yeterli bilgilendirmeler ürünün paketine yazılmayabiliyor, üstelik yazı boyutları da küçük bir alana sığması için okumanın oldukça zor olduğu bir boyutta tutuluyor. Ayrıca bazı ürünlerde tüketicinin alerjeni olduğu maddeyi içeren bir ürünü eksik beyan sebebiyle alabildiği de görülmüştür. Bu sorunun önüne geçilebilmek için pakete içeriğin doğru ve eksiksiz beyan edilmesinin dışında, tüketicilerle yapılan araştırmalarda bir uygulama geliştirilmesinin de makul olduğu gözlemlendi. Geliştirilecek uygulamanın erişilebilirliğinin en üst düzeyde olabilmesi için uygulama internet sayfası şeklinde yapıldı. Bu sayede internete erişimi olan ve internet tarayıcısına girebilecek düzeydeki her cihaz ile internet sayfasına erişim sağlanabilmektedir. Uygulama sayesinde tüketiciler içeriğinden şüphelendiği yahut içeriğini, değerlerini net okuyamadığı ürünlerin barkod numarasını, adını bu internet sayfasına yazarak veya barkodu kamera ile okutarak ürünün ilgi sayfasına gidip istediği bilgiye kolaylıkla erişebilmektedir. Bir maddeye alerjeni olan kişiler veya küçük yazı boyutu yüzünden gerekli bilgilere erişemeyen tüketiciler yapılan bu internet sayfası sayesinde bu sorunları aşmıştır.
            </span>
          </div>
        </div>
        <div class="home-footer">
          <footer class="home-footer1">
            <div class="home-container09">
              <span class="home-text16">
                <span>by Vibasdo</span>
                <br />
                <span>vibasdo@gmail.com</span>
                <br />
                <span>QR tarayıcısı Dynamsoft tarafından sağlanmaktadır.</span>
                <br />
              </div>
            </div>
          </footer>
        </div>
      </div>
    </div>

    <script>
        // Ürün adı ile bağlantılı barkod numaraları. 
        var pageMappings = {
            //"404": "404.html",
            //"abc": "404.html",
            //"101": "page.html",
            //"test": "page.html",
            "muzlu enerji barı": "1234567890123.html",
            "çilekli yoğurt smoothie": "2345678901234.html",
            "avakado humus": "3456789012345.html",
            "zencefilli yeşil çay": "4567890123456.html",
            "ülker çikolatalı gofret": "8690504135913.html",
            "ülker caramio": "8690766149949.html",
        };

        // Autocomplete özelliğinin çalışması için gerekli.
        var barkodMappings = {
            "1234567890123": "1234567890123.html",
            "2345678901234": "2345678901234.html",
            "3456789012345": "3456789012345.html",
            "4567890123456": "4567890123456.html",
            "8690504135913": "8690504135913.html",
            "8690766149949": "8690766149949.html",
        };

        function turkishToLower(str) {
            var turkishCharacters = { "İ": "i", "I": "ı", "Ç": "ç", "Ş": "ş", "Ğ": "ğ", "Ü": "ü", "Ö": "ö" };

            return str.replace(/[\u0130\u0049\u00C7\u015E\u011E\u00DC\u00D6]/g, function (char) {
                return turkishCharacters[char];
            }).toLowerCase();
        }

        function searchPage() {
            var inputValue = document.getElementById("searchInput").value.trim();

            if (/^\d+$/.test(inputValue)) {
                window.location.href = inputValue + ".html";
            } else {
                inputValue = turkishToLower(inputValue);

                inputValue = turkishToLower(inputValue);

                var pageUrl = pageMappings[inputValue] || barkodMappings[inputValue];

                if (!pageUrl) {
                    alert("Girilen değere uygun sayfa bulunamadı!");
                } else {
                    window.location.href = pageUrl;
                }
            }
        }

        document.getElementById("searchInput").addEventListener("keyup", function(event) {
            if (event.key === "Enter") {
                searchPage();
            }
        });

        document.getElementById("searchInput").addEventListener("input", function() {
            var inputValue = document.getElementById("searchInput").value.trim();
            var autocompleteList = document.getElementById("autocompleteList");

            inputValue = turkishToLower(inputValue);

            autocompleteList.innerHTML = "";

            if (inputValue === "") {
                return;
            }

            for (var key in pageMappings) {
                var lowerKey = turkishToLower(key);
                if (lowerKey.startsWith(inputValue)) {
                    var listItem = document.createElement("li");
                    listItem.textContent = key;
                    listItem.addEventListener("click", function() {
                        document.getElementById("searchInput").value = this.textContent;
                        searchPage();
                    });
                    autocompleteList.appendChild(listItem);
                }
            }

            for (var barcode in barkodMappings) {
                var lowerBarcode = turkishToLower(barcode);
                if (lowerBarcode.startsWith(inputValue)) {
                    var listItem = document.createElement("li");
                    listItem.textContent = barcode;
                    listItem.addEventListener("click", function() {
                        document.getElementById("searchInput").value = this.textContent;
                        searchPage();
                    });
                    autocompleteList.appendChild(listItem);
                }
            }
        });

        Dynamsoft.DBR.BarcodeReader.license = 'DLS2eyJoYW5kc2hha2VDb2RlIjoiMTAyNTE1OTE2LVRYbFhaV0pRY205cVgyUmljZyIsIm1haW5TZXJ2ZXJVUkwiOiJodHRwczovL21kbHMuZHluYW1zb2Z0b25saW5lLmNvbS8iLCJvcmdhbml6YXRpb25JRCI6IjEwMjUxNTkxNiIsInN0YW5kYnlTZXJ2ZXJVUkwiOiJodHRwczovL3NkbHMuZHluYW1zb2Z0b25saW5lLmNvbS8iLCJjaGVja0NvZGUiOjcxNDY2MDE0OX0=';

        async function startBarcodeScanner() {
            try {
                const scanner = await Dynamsoft.DBR.BarcodeScanner.createInstance();
                
                scanner.onFrameRead = results => {
                    console.log("Barcodes on one frame:");
                    for (let result of results) {
                        const format = result.barcodeFormatString;
                        console.log(format + ": " + result.barcodeText);
                    }
                };
                
                scanner.onUniqueRead = (txt, result) => {
                    const barcodeValue = txt.trim();
                    const htmlPage = `${barcodeValue}.html`;
                    window.location.href = htmlPage;
                    console.log("Unique Code Found: ", result);
                }
                
                await scanner.show(document.getElementById('dbrScanner'));
            } catch (ex) {
                let errMsg;
                if (ex.message?.includes("network connection error")) {
                    errMsg = "Dynamsoft Lisans Serverına bağlanılamadı: bağlantı hatası. İnternet bağlantınızı kontrol edin veya Dynamsoft Support (support@dynamsoft.com) ile çevrimdışı lisans için iletişime geçin.";
                } else {
                    errMsg = ex.message || ex;
                }
                console.error(errMsg);
                alert(errMsg);
            }
        }
    </script>
  </body>
</html>